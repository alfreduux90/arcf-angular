"use strict";(self.webpackChunkdx_iniciativas=self.webpackChunkdx_iniciativas||[]).push([[598],{4598:(A,l,i)=>{i.r(l),i.d(l,{AuthComponent:()=>x});var s=i(6223),u=i(3403),m=i(6814),t=i(5879);function c(e,n){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a," ")}}function h(e,n){if(1&e&&(t.TgZ(0,"ul",1),t.YNc(1,c,2,1,"li",2),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.errorList)}}let f=(()=>{var e;class n{constructor(){this.errorList=[]}set errors(o){this.errorList=o?Object.keys(o.errors||{}).map(r=>`${r} ${o.errors[r]}`):[]}}return(e=n).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-errors"]],inputs:{errors:"errors"},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","error-messages",4,"ngIf"],[1,"error-messages"],[4,"ngFor","ngForOf"]],template:function(o,r){1&o&&t.YNc(0,h,2,1,"ul",0),2&o&&t.Q6J("ngIf",r.errorList)},dependencies:[m.O5,m.sg],encapsulation:2}),n})();var g=i(9773),d=i(8645),v=i(6957);const T=function(){return["/login"]};function Z(e,n){1&e&&(t.TgZ(0,"a",14),t._uU(1,"\xbfYa tienes una cuenta?"),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,T))}const b=function(){return["/register"]};function y(e,n){1&e&&(t.TgZ(0,"a",14),t._uU(1,"\xbfNecesitas una cuenta?"),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,b))}function C(e,n){1&e&&t._UZ(0,"input",15)}let x=(()=>{var e;class n{constructor(o,r,p){this.route=o,this.router=r,this.userService=p,this.authType="",this.title="",this.errors={errors:{}},this.isSubmitting=!1,this.destroy$=new d.x,this.authForm=new s.cw({email:new s.NI("",{validators:[s.kI.required],nonNullable:!0}),password:new s.NI("",{validators:[s.kI.required],nonNullable:!0})})}ngOnInit(){this.authType=this.route.snapshot.url.at(-1).path,this.title="login"===this.authType?"Sign in":"Sign up","register"===this.authType&&this.authForm.addControl("username",new s.NI("",{validators:[s.kI.required],nonNullable:!0}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}submitForm(){this.isSubmitting=!0,this.errors={errors:{}},("login"===this.authType?this.userService.login(this.authForm.value):this.userService.register(this.authForm.value)).pipe((0,g.R)(this.destroy$)).subscribe({next:()=>{this.router.navigate(["/"])},error:r=>{this.errors=r,this.isSubmitting=!1}})}}return(e=n).\u0275fac=function(o){return new(o||e)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(v.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth-page"]],standalone:!0,features:[t.jDz],decls:20,vars:9,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"routerLink",4,"ngIf"],[3,"errors"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"form-group"],["formControlName","username","placeholder","Username","class","form-control form-control-lg","type","text",4,"ngIf"],["formControlName","email","placeholder","Email","type","text",1,"form-control","form-control-lg"],["formControlName","password","placeholder","Password","type","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled"],[3,"routerLink"],["formControlName","username","placeholder","Username","type","text",1,"form-control","form-control-lg"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5),t.qZA(),t.TgZ(6,"p",4),t.YNc(7,Z,2,2,"a",5),t.YNc(8,y,2,2,"a",5),t.qZA(),t._UZ(9,"app-list-errors",6),t.TgZ(10,"form",7),t.NdJ("ngSubmit",function(){return r.submitForm()}),t.TgZ(11,"fieldset",8)(12,"fieldset",9),t.YNc(13,C,1,0,"input",10),t.qZA(),t.TgZ(14,"fieldset",9),t._UZ(15,"input",11),t.qZA(),t.TgZ(16,"fieldset",9),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"button",13),t._uU(19),t.qZA()()()()()()()),2&o&&(t.xp6(5),t.Oqu(r.title),t.xp6(2),t.Q6J("ngIf","register"===r.authType),t.xp6(1),t.Q6J("ngIf","login"===r.authType),t.xp6(1),t.Q6J("errors",r.errors),t.xp6(1),t.Q6J("formGroup",r.authForm),t.xp6(1),t.Q6J("disabled",r.isSubmitting),t.xp6(2),t.Q6J("ngIf","register"===r.authType),t.xp6(5),t.Q6J("disabled",!r.authForm.valid),t.xp6(1),t.hij(" ",r.title," "))},dependencies:[u.rH,f,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),n})()}}]);